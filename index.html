<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>عيادة الشامي - رعاية طبية تثق بها</title>
  <meta name="description" content="عيادة الشامي: نخبة من الأطباء المتخصصين وتقنيات حديثة. احجز موعدك الآن بسهولة وأمان.">

  <link rel="icon" href="./images/favicon.ico" type="image/x-icon">
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  
  <style>
    * { -webkit-font-smoothing: antialiased; }
    :root {
      --dark-blue: #0a192f;
      --accent-orange: #fd7e14;
      --accent-orange-hover: #e87311;
      --light-gray: #f8f9fa;
      --text-light: #ccd6f6;
      --bs-primary: #0d6efd;
    }
    body { font-family: 'Tajawal', sans-serif; background-color: var(--light-gray); scroll-behavior: smooth; }
    .navbar { background-color: white; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
    .navbar-brand img { height: 40px; }
    .btn-navbar { background-color: var(--accent-orange); color: white; border-radius: 50px; padding: 8px 25px; transition: all 0.3s ease; }
    .btn-navbar:hover { background-color: var(--accent-orange-hover); transform: translateY(-2px); }
    
    .hero { background-color: var(--dark-blue); color: white; padding: 80px 0; position: relative; overflow: hidden; }
    .hero-bg {
      position: absolute;
      inset: 0;
      background: url('https://plus.unsplash.com/premium_photo-1681966883482-8663ac9a95a7?q=80') center/cover no-repeat;
      opacity: 0.15;
      z-index: 1;
    }
    .hero .container { position: relative; z-index: 2; }
    .hero h1 { font-size: 3.2rem; font-weight: 700; }
    .hero .lead { color: var(--text-light); }
    .hero-booking-card { background: rgba(255, 255, 255, 0.04); backdrop-filter: blur(6px); padding: 22px; border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.06); }
    
    .section-title { text-align: center; margin-bottom: 50px; font-weight: 700; color: var(--dark-blue); }
    .section-title::after { content: ''; display: block; width: 60px; height: 4px; background: var(--accent-orange); margin: 15px auto 0; border-radius: 2px; }
    
    #doctors { background-color: #f0f4f8; }
    .specialist-card {
      background-color: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.07);
      transition: all 0.3s ease;
      text-align: center;
      display: flex;
      flex-direction: column;
    }
    .specialist-card:hover { transform: translateY(-8px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
    .specialist-card .card-header { background-color: var(--bs-primary); padding: 10px; }
    .specialist-card .social-icons a { color: white; margin: 0 8px; font-size: 1rem; opacity: 0.7; transition: opacity 0.3s; }
    .specialist-card .social-icons a:hover { opacity: 1; }
    .specialist-card .card-img-container { padding: 20px; background-color: #f8f9fa; }
    .specialist-card img { width: 150px; height: 150px; object-fit: cover; border-radius: 50%; border: 4px solid white; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    .specialist-card .card-body { background-color: var(--bs-primary); color: white; padding: 20px 15px; flex-grow: 1; }
    .specialist-card .card-body h5 { font-weight: 700; margin-bottom: 8px; }
    .specialist-card .card-body p { font-size: 0.9rem; opacity: 0.9; }
    /* تم التعديل: إضافة تنسيق المواعيد داخل كرت الطبيب */
    .specialist-card .doctor-schedule {
      margin-top: 15px;
      padding-top: 10px;
      border-top: 1px solid rgba(255, 255, 255, 0.3);
      text-align: right;
      font-size: 0.85rem;
    }
    .specialist-card .doctor-schedule p { margin-bottom: 5px; }
    .specialist-card .doctor-schedule i { margin-inline-end: 8px; }

    /* تم التعديل: إعادة تصميم قسم الحجز بالكامل */
    .booking-section-new {
      position: relative;
      padding: 100px 0;
      color: white;
      background: url('https://images.unsplash.com/photo-1538108149393-fbbd81895907?q=80&w=2128') center/cover no-repeat;
    }
    .booking-section-new::before {
      content: '';
      position: absolute;
      inset: 0;
      background-color: rgba(10, 25, 47, 0.8); /* --dark-blue with opacity */
      z-index: 1;
    }
    .booking-section-new .container { position: relative; z-index: 2; }
    .booking-info-item { display: flex; align-items: flex-start; margin-bottom: 25px; }
    .booking-info-item .icon { font-size: 1.8rem; color: var(--accent-orange); margin-inline-end: 20px; }
    .booking-info-item h5 { font-weight: 700; margin-bottom: 5px; }
    .booking-info-item p { color: var(--text-light); }
    .booking-form-card {
      background: white;
      color: #333;
      border-radius: 16px;
      padding: 35px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    }
    .booking-form-card .btn-primary {
      background-color: var(--accent-orange);
      border-color: var(--accent-orange);
    }
    .booking-form-card .btn-primary:hover {
      background-color: var(--accent-orange-hover);
      border-color: var(--accent-orange-hover);
    }
    
    /* تم التعديل: إضافة خلفية صورة لقسم التواصل */
    .contact-section-new {
        position: relative;
        padding: 100px 0;
        background: url('https://images.unsplash.com/photo-1584467735871-8e85353a8413?q=80&w=1974') center/cover no-repeat;
    }
    .contact-section-new::before {
      content: '';
      position: absolute;
      inset: 0;
      background-color: rgba(248, 249, 250, 0.9); /* --light-gray with opacity */
    }
    .contact-section-new .container { position: relative; z-index: 2; }
    .contact-info-card {
        border: none;
        backdrop-filter: blur(5px);
        background-color: rgba(255,255,255,0.8);
    }

    .footer { background-color: var(--dark-blue); color: var(--text-light); text-align: center; padding: 40px 20px; }
  </style>
</head>
<body>
  
  <div class="modal fade" id="successModal" tabindex="-1">
    <!-- ... محتوى المودال يبقى كما هو ... -->
  </div>

  <nav class="navbar navbar-expand-lg navbar-light sticky-top">
    <!-- ... محتوى الشريط العلوي يبقى كما هو ... -->
  </nav>

  <header class="hero" id="home">
    <!-- ... محتوى الهيرو يبقى كما هو ... -->
  </header>

  <main>
    <section class="py-5" id="doctors">
      <div class="container my-5">
        <h2 class="section-title">فريقنا الطبي المتخصص</h2>
        <div id="doctorCardsContainer" class="row g-4 justify-content-center">
          <div class="text-center w-100"><div class="spinner-border" style="width: 3rem; height: 3rem; color: var(--accent-orange);" role="status"><span class="visually-hidden">Loading...</span></div></div>
        </div>
      </div>
    </section>

    <!-- تم التعديل: استبدال قسم الحجز القديم بالجديد -->
    <section class="booking-section-new" id="booking">
        <div class="container">
            <div class="row align-items-center g-5">
              <div class="col-lg-6">
                <h2 class="display-5 fw-bold mb-4">احجز موعدك الآن</h2>
                <p class="lead mb-5" style="color: var(--text-light);">املأ النموذج وسنقوم بالتنسيق معك خلال 24 ساعة. للطوارئ، يرجى الاتصال بنا مباشرة.</p>
                <div class="booking-info-item">
                    <div class="icon"><i class="fas fa-notes-medical"></i></div>
                    <div>
                        <h5>نظام مناعة متكامل</h5>
                        <p>نقدم حلولاً متكاملة لتقوية مناعتك وحمايتك من الأمراض.</p>
                    </div>
                </div>
                <div class="booking-info-item">
                    <div class="icon"><i class="fas fa-apple-alt"></i></div>
                    <div>
                        <h5>استشارات تغذية</h5>
                        <p>احصل على خطط تغذية مخصصة من خبرائنا لتحقيق أهدافك الصحية.</p>
                    </div>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="booking-form-card">
                  <h3 class="text-center mb-4">املأ النموذج لحجز موعد</h3>
                  <form id="mainBookingForm" novalidate>
                     <div class="mb-3"><label class="form-label">الاسم الكامل</label><input id="mainPatientName" class="form-control" required></div>
                     <div class="mb-3"><label class="form-label">رقم الهاتف (واتساب)</label><input id="mainPatientPhone" class="form-control" required type="tel"></div>
                     <div class="mb-3"><label class="form-label">اختر الطبيب</label><select id="mainDoctorSelect" class="form-select" required></select></div>
                     <div class="row g-3">
                        <div class="col-md-6"><label class="form-label">التاريخ</label><input id="mainDateInput" type="date" class="form-control" required></div>
                        <div class="col-md-6"><label class="form-label">الوقت</label><select id="mainTimeSelect" class="form-select" required disabled><option>اختر طبيبًا وتاريخًا</option></select></div>
                     </div>
                     <div id="mainMessageArea" class="mt-3"></div>
                     <button id="mainSubmitButton" class="btn btn-primary w-100 mt-4 py-2" type="submit">تأكيد الحجز الآن</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
    </section>
    
    <!-- تم التعديل: استبدال قسم التواصل القديم بالجديد -->
    <section class="contact-section-new" id="contact">
      <div class="container">
        <h2 class="section-title">تواصل معنا</h2>
        <div class="row g-4 align-items-center justify-content-center">
          <div class="col-lg-6">
            <div class="contact-info-card">
              <div class="contact-info-item"><i class="fas fa-map-marker-alt"></i><span>446 ش فيصل - برج النصر، القاهرة، مصر</span></div>
              <div class="contact-info-item"><i class="fas fa-phone"></i><a href="tel:+201006404614" class="text-decoration-none text-dark">01006404614</a></div>
              <div class="contact-info-item"><i class="fas fa-envelope"></i><a href="mailto:shamymediaeg@gmail.com" class="text-decoration-none text-dark">shamymediaeg@gmail.com</a></div>
              <hr class="my-4">
              <h5 class="mb-3">تابعنا على:</h5>
              <div class="social-icons"><a href="#" target="_blank"><i class="fab fa-instagram"></i></a><a href="#" target="_blank"><i class="fab fa-twitter"></i></a><a href="#" target="_blank"><i class="fab fa-facebook-f"></i></a></div>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="ratio ratio-16x9" style="border-radius: 16px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.08);">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d4053.110004188214!2d31.195507575552554!3d30.013462674939177!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x145846edbfabd573%3A0xf1694f2f21218509!2sDr.%20Abdelaziz%20Moussa%20-%20Alshomoukh%20Dentistry!5e1!3m2!1sen!2seg!4v1762983722731!5m2!1sen!2seg" allowfullscreen="" loading="lazy"></iframe>
            </div>
          </div>
        </div>
      </div>
    </section>

  </main>
  
  <footer class="footer">
    <!-- ... محتوى الفوتر يبقى كما هو ... -->
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // ⚡⚡⚡ تنبيه هام جدًا ⚡⚡⚡
    // تأكد من أن هذا الرابط هو الرابط الصحيح من عملية النشر الأخيرة
    const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbyow5jzkiMwO92mM7u9FjCrmfYcw55PRa3kalEj7JNODUMt0qQJ1vx6ezLHStgM89I9iA/exec';
    
    const CLINIC_WHATSAPP_NUMBER = '201006404614';

    // ... جميع متغيرات JavaScript تبقى كما هي ...
    const doctorCardsContainer = document.getElementById('doctorCardsContainer');
    // ...الخ

    // ... باقي دوال JavaScript (DOMContentLoaded, generateTokenOnLoad, etc.) تبقى كما هي ...

    // تم التعديل: تحديث دالة تحميل الأطباء لإضافة المواعيد
    async function loadDoctorSchedules() {
      try {
        const res = await fetch(`${WEB_APP_URL}?action=getDoctorSchedules`);
        if (!res.ok) throw new Error('فشل الاتصال بالخادم. تأكد من صحة رابط السكريبت.');
        doctorSchedules = await res.json();
        
        doctorCardsContainer.innerHTML = '';
        mainDoctorSelect.innerHTML = '<option value="" selected disabled>-- اختر الطبيب --</option>';
        heroDoctorSelect.innerHTML = '<option value="" selected disabled>اختر الطبيب</option>';

        const daysMap = ['الأحد', 'الإثنين', 'الثلاثاء', 'الأربعاء', 'الخميس', 'الجمعة', 'السبت'];

        for (const key in doctorSchedules) {
          const d = doctorSchedules[key];
          
          const scheduleDays = d.days.map(dayIndex => daysMap[dayIndex]).join('، ');
          const scheduleHours = `من ${d.startHour}:00 إلى ${d.endHour}:00`;
          
          const imageName = key.toLowerCase().replace(/dr\.?\s*/g, "dr_").replace(/\s+/g, "_") + ".png";
          
          const cardHtml = `
            <div class="col-lg-3 col-md-6 mb-4">
              <div class="specialist-card h-100">
                <div class="card-header">
                  <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                  </div>
                </div>
                <div class="card-img-container">
                    <img loading="lazy" src="./images/${imageName}" class="img-fluid" alt="${d.name}">
                </div>
                <div class="card-body">
                  <h5 class="card-title">${d.name}</h5>
                  <p class="card-text">${d.specialty}</p>
                  <div class="doctor-schedule">
                      <p><i class="fas fa-calendar-alt"></i> ${scheduleDays}</p>
                      <p><i class="fas fa-clock"></i> ${scheduleHours}</p>
                  </div>
                </div>
              </div>
            </div>`;
          doctorCardsContainer.insertAdjacentHTML('beforeend', cardHtml);

          const opt = new Option(`${d.name} - ${d.specialty}`, key);
          mainDoctorSelect.appendChild(opt.cloneNode(true));
          heroDoctorSelect.appendChild(opt);
        }
      } catch (err) {
        console.error('Failed to load doctor schedules:', err);
        doctorCardsContainer.innerHTML = `<p class="alert alert-danger text-center w-100">حدث خطأ أثناء تحميل بيانات الأطباء. يرجى تحديث الصفحة. (${err.message})</p>`;
      }
    }
    
    // ... باقي دوال JavaScript (updateAvailableTimes, mainForm.addEventListener, etc.) تبقى كما هي ...
  </script>
</body>
</html>
